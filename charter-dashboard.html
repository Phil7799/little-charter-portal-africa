<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charter Analytics Dashboard - Little Africa</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo-container">
                <div class="logo">
                    <span class="logo-blue">L</span><span class="logo-green">I</span><span class="logo-yellow">T</span><span class="logo-red">T</span><span class="logo-blue">L</span><span class="logo-green">E</span><span class="logo-yellow"> </span><span class="logo-red">A</span><span class="logo-blue">F</span><span class="logo-green">R</span><span class="logo-yellow">I</span><span class="logo-red">C</span><span class="logo-blue">A</span>
                </div>
                <h1>Charter Analytics Dashboard</h1>
            </div>
            <div class="portal-toggle">
                <a href="hr-dashboard.html" class="btn" style="margin-right:10px;background:var(--green)">
                    <i class="fas fa-users"></i> HR Dashboard
                </a>
                <button id="switchPortal" class="toggle-btn">
                    <i class="fas fa-exchange-alt"></i> Sales Portal
                </button>
            </div>
        </header>

        <nav class="navbar">
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i> Overview</a></li>
                <li><a href="upload.html"><i class="fas fa-upload"></i> Upload</a></li>
                <li><a href="charter-dashboard.html" class="active"><i class="fas fa-building"></i> Charter</a></li>
                <li><a href="hr-dashboard.html"><i class="fas fa-users"></i> HR</a></li>
                <li><a href="tele-dashboard.html"><i class="fas fa-phone-alt"></i> Telesales</a></li>
                <li><a href="team-performance.html"><i class="fas fa-trophy"></i> Team</a></li>
                <li><a href="reports.html"><i class="fas fa-file-alt"></i> Reports</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <div class="dashboard-header">
                <h2><i class="fas fa-building" style="color:var(--blue)"></i> Charter Services Performance</h2>
                <div class="filters">
                    <div class="filter-group">
                        <label for="associateFilter"><i class="fas fa-user"></i> Associate</label>
                        <select id="associateFilter">
                            <option value="All">All Associates</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="monthFilter"><i class="fas fa-calendar"></i> Month</label>
                        <select id="monthFilter">
                            <option value="All">All Months</option>
                            <option value="January">January</option><option value="February">February</option>
                            <option value="March">March</option><option value="April">April</option>
                            <option value="May">May</option><option value="June">June</option>
                            <option value="July">July</option><option value="August">August</option>
                            <option value="September">September</option><option value="October">October</option>
                            <option value="November">November</option><option value="December">December</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="yearFilter"><i class="fas fa-calendar-alt"></i> Year</label>
                        <select id="yearFilter">
                            <option value="2026">2026</option>
                            <option value="2025">2025</option>
                        </select>
                    </div>
                    <button id="applyFilters" class="btn"><i class="fas fa-filter"></i> Apply</button>
                    <button id="resetFilters" class="btn" style="background:var(--dark-gray)"><i class="fas fa-redo"></i> Reset</button>
                </div>
            </div>

            <!-- KPI Cards â€” 6 cards -->
            <div class="stats-container" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr))">
                <div class="stat-card blue">
                    <h3><i class="fas fa-chart-line"></i> TOTAL CHARTER REVENUE</h3>
                    <div class="stat-value" id="totalRevenue">Ksh 0.00</div>
                    <p>Target: <span id="revenueTarget">Ksh 0.00</span></p>
                    <div class="stat-change positive" id="revenueAchievement"><i class="fas fa-arrow-up"></i> 0.0%</div>
                </div>

                <div class="stat-card" style="border-top:4px solid #00bcd4">
                    <h3><i class="fas fa-coins" style="color:#00bcd4"></i> NET REVENUE (18%)</h3>
                    <div class="stat-value" id="netRevenue" style="color:#00bcd4">Ksh 0.00</div>
                    <p>18% of total revenue</p>
                    <div class="stat-change" style="color:#00bcd4"><i class="fas fa-percentage"></i> Commission</div>
                </div>

                <div class="stat-card green">
                    <h3><i class="fas fa-briefcase"></i> NEW BUSINESS</h3>
                    <div class="stat-value" id="newBusiness">Ksh 0.00</div>
                    <p>Year: <span id="newBusinessYear">2026</span></p>
                    <div class="stat-change" id="newBusinessChange"><i class="fas fa-chart-line"></i> --</div>
                </div>

                <div class="stat-card yellow">
                    <h3><i class="fas fa-users-cog"></i> EXISTING BUSINESS</h3>
                    <div class="stat-value" id="existingBusiness">Ksh 0.00</div>
                    <p>Year: <span id="existingBusinessYear">2026</span></p>
                    <div class="stat-change" id="existingBusinessChange"><i class="fas fa-chart-line"></i> --</div>
                </div>

                <div class="stat-card" style="border-top:4px solid #9c27b0">
                    <h3><i class="fas fa-handshake" style="color:#9c27b0"></i> BUSBUDDY</h3>
                    <div class="stat-value" id="busbuddyRevenue" style="color:#9c27b0">Ksh 0.00</div>
                    <p>Year: <span id="busbuddyYear">2026</span></p>
                    <div class="stat-change" id="busbuddyChange"><i class="fas fa-chart-line"></i> --</div>
                </div>

                <div class="stat-card red">
                    <h3><i class="fas fa-calendar-check"></i> YEAR-OVER-YEAR</h3>
                    <div class="stat-value" id="yoyGrowth">0.0%</div>
                    <p>2026 vs 2025</p>
                    <div class="stat-change" id="yoyChange"><i class="fas fa-chart-line"></i> Details</div>
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-container">
                <div class="chart-card">
                    <h3><i class="fas fa-chart-bar blue-text"></i> Revenue Trend: 2026 vs 2025 vs Target</h3>
                    <div class="chart-container"><canvas id="revenueTrendChart"></canvas></div>
                </div>
                <div class="chart-card">
                    <h3><i class="fas fa-chart-pie green-text"></i> Revenue Breakdown by Type</h3>
                    <div class="chart-container"><canvas id="revenueBreakdownChart"></canvas></div>
                </div>
                <div class="chart-card">
                    <h3><i class="fas fa-chart-line yellow-text"></i> Monthly Performance vs Target</h3>
                    <div class="chart-container"><canvas id="monthlyTargetChart"></canvas></div>
                </div>
                <div class="chart-card">
                    <h3><i class="fas fa-user-tie red-text"></i> Associate Performance</h3>
                    <div class="chart-container"><canvas id="associatePerformanceChart"></canvas></div>
                </div>
            </div>

            <!-- Table -->
            <div class="data-table-container">
                <h3><i class="fas fa-table blue-text"></i> Detailed Charter Performance Data</h3>
                <table class="data-table" id="performanceTable">
                    <thead>
                        <tr>
                            <th>Month</th>
                            <th>Associate</th>
                            <th>New Biz 2025</th>
                            <th>Existing Biz 2025</th>
                            <th>Busbuddy 2025</th>
                            <th>Total 2025</th>
                            <th>New Biz 2026</th>
                            <th>Existing Biz 2026</th>
                            <th>Busbuddy 2026</th>
                            <th>Total 2026</th>
                            <th>Target 2026</th>
                            <th>Net Rev (18%)</th>
                            <th>Achievement %</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr><td colspan="13" style="text-align:center;padding:40px">
                            <i class="fas fa-database" style="font-size:3rem;color:#ccc;display:block;margin-bottom:15px"></i>
                            <h4>No Data Loaded</h4>
                            <p>Upload an Excel file to see charter analytics</p>
                            <a href="upload.html" class="btn" style="margin-top:15px"><i class="fas fa-upload"></i> Upload Data</a>
                        </td></tr>
                    </tbody>
                </table>
            </div>

            <div style="background:var(--light-blue);padding:14px 18px;border-radius:var(--radius);margin-bottom:28px;font-size:0.88rem">
                <p><i class="fas fa-info-circle blue-text"></i> <strong>Last Data Update:</strong> <span id="lastUpdate">Never</span> &nbsp;|&nbsp; <a href="upload.html">Upload new data</a></p>
            </div>
        </main>

        <footer class="footer">
            <p>Little Africa Charter Analytics &copy; 2025</p>
        </footer>
    </div>

    <script src="data-parser.js"></script>
    <script src="charter-dashboard.js"></script>
</body>
</html>